{% extends '::base.html.twig' %}

{% block title %}{{ 'quiz.question.page_title'|trans }}{% endblock %}

{% block header %}
<h1>{{ quiz.title }} <small>{{ 'quiz.question.title.comment'|trans }}</small></h1>
{% endblock %}

{% block body %}

{% if quiz.time > 0 %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script language="JavaScript">
window.setInterval(function() {
  sec = $('#remainder_sec').html();
  min = $('#remainder_min').html();
  
  if (sec == 0)
  {
    sec = 59;
    min = min-1;
  } else
  {
    sec = sec-1;
  }
  
  $('#remainder_sec').text(sec);
  $('#remainder_min').text(min);
  
  if ((min == 0) && (sec <= 0))
  {
    window.location.href = "{{ path('smirik_quiz_final', {'user_quiz_id': user_quiz.id }) }}";
  }
}, 1000);
</script>

<div id="remainder">
  {{ 'quiz.question.timeleft'|trans }} 
  <span id="remainder_min">{{ user_quiz.countTimeLeft['min'] }}</span> {{ 'quiz.question.min'|trans }}
  <span id="remainder_sec">{{ user_quiz.countTimeLeft['sec'] }}</span> {{ 'quiz.question.sec'|trans }}
</div>
{% endif %}

<h3>#{{number+1}}. {{ question.text }}</h3>

<form method="post" action="{{ path('smirik_quiz_check') }}">      
  <div class="question">
    <input type="hidden" name="question_id" value="{{ question.id }}">
    <input type="hidden" name="user_quiz_id" value="{{ user_quiz.id }}">
    <input type="hidden" name="number" value="{{ number }}">
    {% for answer in question.answers %}
    <input type="radio" name="answer_id" value="{{ answer.id }}" required {% if current_answer == answer.id %}checked{% endif %}> {{ answer.title }}<br />
    {% endfor %} 
    <button class="btn large primary">{{ 'quiz.question.submit'|trans }}</button>
   </div>
</form>

{% if number > 0 %}
  <a href="{{ path('smirik_quiz_go', {'uq_id': user_quiz.id, 'number': number-1 }) }}" class="btn">{{ 'quiz.question.previous'|trans }}</a>
{% endif %}
{% if (number+1) < total %}
  <a href="{{ path('smirik_quiz_go', {'uq_id': user_quiz.id, 'number': number+1 }) }}" class="btn">{{ 'quiz.question.next'|trans }}</a>
{% endif %}

{% endblock %}
